{% extends "base.html" %}

{% block title %}ğŸ”¤ ÙØ­Øµ Base64 - CyberShield Ultra{% endblock %}

{% block meta_description %}Ø£Ø¯Ø§Ø© ÙÙƒ ÙˆØªØ´ÙÙŠØ± Base64 Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©. ØªØ­Ù„ÙŠÙ„ ÙˆÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± Ù…Ø¹ Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¨Ø´ÙƒÙ„ Ù…Ù†Ø¸Ù….{% endblock %}

{% block styles %}
<style>
    /* Base64 Check - Orange theme */
    .base64-hero::before {
        background: radial-gradient(circle at 20% 30%, rgba(249, 115, 22, 0.3) 0%, transparent 50%),
                    radial-gradient(circle at 80% 70%, rgba(59, 130, 246, 0.3) 0%, transparent 50%);
    }
    .hero-icon { filter: drop-shadow(0 0 30px #f97316); }
    .hero-title { background: linear-gradient(135deg, #fff, #fdba74, #93c5fd); }
    .badge-item { border-color: rgba(249, 115, 22, 0.4); color: #fdba74; }
    .tool-card-legendary { border-color: rgba(249, 115, 22, 0.3); }
    .card-title { background: linear-gradient(135deg, #fff, #fdba74); }
    .version-badge { background: rgba(249, 115, 22, 0.15); border-color: rgba(249, 115, 22, 0.4); color: #fdba74; }
    .base64-input { border-color: rgba(249, 115, 22, 0.4); }
    .base64-input:focus { border-color: #f97316; box-shadow: 0 0 0 4px rgba(249, 115, 22, 0.2); }
    .analyze-btn { background: linear-gradient(135deg, #f97316, #3b82f6); box-shadow: 0 10px 30px -5px rgba(249, 115, 22, 0.5); }
    .stat-item-legendary { border-color: rgba(249, 115, 22, 0.3); }
    .stat-value-legendary { background: linear-gradient(135deg, #fff, #fdba74); }
    .result-card-legendary { border-color: rgba(249, 115, 22, 0.4); }
    .result-label-large { color: #fdba74; }
    .result-item-large { border-color: rgba(249, 115, 22, 0.3); }
    .result-item-large:hover { border-color: #f97316; box-shadow: 0 15px 30px -15px rgba(249, 115, 22, 0.5); }
    .ai-insight-large { background: linear-gradient(135deg, rgba(249, 115, 22, 0.1), rgba(59, 130, 246, 0.1)); border-color: rgba(249, 115, 22, 0.4); }
    .ai-title h4 { background: linear-gradient(135deg, #fff, #fdba74); }
    .signals-title-large { color: #fdba74; }
    .feature-card-legendary { border-color: rgba(249, 115, 22, 0.3); }
    .feature-card-legendary:hover { border-color: #f97316; box-shadow: 0 20px 40px -15px rgba(249, 115, 22, 0.5); }
    .result-footer-large { border-color: rgba(249, 115, 22, 0.3); }
    .spinner-large { border-top-color: #f97316; }

    .decoded-output {
        background: rgba(0, 0, 0, 0.4);
        border-radius: 20px;
        padding: 20px;
        font-family: monospace;
        white-space: pre-wrap;
        word-break: break-word;
        direction: ltr;
        text-align: left;
        max-height: 300px;
        overflow-y: auto;
        border: 1px solid rgba(249, 115, 22, 0.3);
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="base64-hero" style="position: relative; min-height: 40vh; display: flex; align-items: center; justify-content: center; text-align: center; padding: 80px 0; overflow: hidden; background: linear-gradient(135deg, #0a0f1e 0%, #1a1a3a 50%, #2d1b4a 100%); border-radius: 0 0 50px 50px; margin-bottom: 40px;">
    <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(circle at 20% 30%, rgba(249, 115, 22, 0.3) 0%, transparent 50%), radial-gradient(circle at 80% 70%, rgba(59, 130, 246, 0.3) 0%, transparent 50%); animation: heroPulse 8s ease-in-out infinite; z-index: 0;"></div>
    <div class="base64-hero-content" style="position: relative; z-index: 10; max-width: 900px; margin: 0 auto; padding: 0 20px;">
        <span class="hero-icon" style="font-size: 5rem; display: block; margin-bottom: 20px; filter: drop-shadow(0 0 30px #f97316); animation: float 3s ease-in-out infinite;">ğŸ”¤</span>
        <h1 class="hero-title" style="font-size: clamp(2.5rem, 6vw, 4rem); font-weight: 900; margin-bottom: 20px; background: linear-gradient(135deg, #fff, #fdba74, #93c5fd); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 0 30px rgba(249, 115, 22, 0.5);">ÙØ­Øµ Base64</h1>
        <p class="hero-subtitle" style="font-size: 1.3rem; color: #e2e8f0; max-width: 700px; margin: 0 auto; line-height: 1.8; text-shadow: 0 0 20px rgba(0, 0, 0, 0.5);">ÙÙƒ ÙˆØªØ´ÙÙŠØ± Base64 Ù…Ø¹ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ¹Ø±Ø¶Ù‡Ø§ Ø¨Ø´ÙƒÙ„ Ù…Ù†Ø¸Ù…</p>
        <div class="hero-badges" style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-top: 30px;">
            <span class="badge-item" style="padding: 8px 20px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(249, 115, 22, 0.4); border-radius: 50px; color: #fdba74; font-size: 0.9rem; font-weight: 600; backdrop-filter: blur(10px);">ğŸ”“ ÙÙƒ</span>
            <span class="badge-item" style="padding: 8px 20px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(249, 115, 22, 0.4); border-radius: 50px; color: #fdba74; font-size: 0.9rem; font-weight: 600; backdrop-filter: blur(10px);">ğŸ” ØªØ´ÙÙŠØ±</span>
            <span class="badge-item" style="padding: 8px 20px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(249, 115, 22, 0.4); border-radius: 50px; color: #fdba74; font-size: 0.9rem; font-weight: 600; backdrop-filter: blur(10px);">ğŸ“ Ù†Øµ</span>
            <span class="badge-item" style="padding: 8px 20px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(249, 115, 22, 0.4); border-radius: 50px; color: #fdba74; font-size: 0.9rem; font-weight: 600; backdrop-filter: blur(10px);">ğŸ–¼ï¸ ØµÙˆØ±Ø©</span>
            <span class="badge-item" style="padding: 8px 20px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(249, 115, 22, 0.4); border-radius: 50px; color: #fdba74; font-size: 0.9rem; font-weight: 600; backdrop-filter: blur(10px);">ğŸ”¢ Ø¨Ø§ÙŠØª</span>
        </div>
    </div>
</section>

<div class="tool-container" style="max-width: 900px; margin: 0 auto 60px; padding: 0 20px;">
    <div class="tool-card-legendary" style="background: rgba(18, 18, 36, 0.8); backdrop-filter: blur(20px); border: 1px solid rgba(249, 115, 22, 0.3); border-radius: 50px; padding: 50px; box-shadow: 0 30px 60px -20px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(249, 115, 22, 0.2) inset; text-align: center;">
        <div class="card-header" style="display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 40px; flex-wrap: wrap;">
            <span class="status-dot" style="width: 12px; height: 12px; background: #10b981; border-radius: 50%; box-shadow: 0 0 20px #10b981; animation: pulse 2s infinite;"></span>
            <h2 class="card-title" style="font-size: 2rem; font-weight: 800; margin: 0; background: linear-gradient(135deg, #fff, #fdba74); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Ù…Ø­Ù„Ù„ Base64</h2>
            <span class="version-badge" style="padding: 8px 20px; background: rgba(249, 115, 22, 0.15); border: 1px solid rgba(249, 115, 22, 0.4); border-radius: 50px; color: #fdba74; font-size: 0.9rem; font-weight: 600;">âš¡ v17.0 Â· ÙÙˆØ±ÙŠ</span>
        </div>

        <div style="display: flex; gap: 10px; justify-content: center; margin-bottom: 20px;">
            <button id="decode-btn" class="analyze-btn" style="background: linear-gradient(135deg, #f97316, #3b82f6); padding: 15px 30px;">ğŸ”“ ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±</button>
            <button id="encode-btn" class="analyze-btn" style="background: linear-gradient(135deg, #3b82f6, #f97316); padding: 15px 30px;">ğŸ” ØªØ´ÙÙŠØ±</button>
        </div>

        <div class="input-container" style="display: flex; gap: 15px; margin-bottom: 40px; flex-wrap: wrap; justify-content: center;">
            <textarea id="tool-input"
                   class="base64-input"
                   style="flex: 1; min-width: 300px; padding: 20px 25px; background: rgba(0, 0, 0, 0.4); border: 2px solid rgba(249, 115, 22, 0.4); border-radius: 30px; font-size: 1.2rem; color: #fff; transition: all 0.3s ease; direction: ltr; text-align: left; min-height: 150px; font-family: monospace;"
                   placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù†Øµ Ø£Ùˆ Base64 Ù‡Ù†Ø§..."
                   dir="ltr">Hello World</textarea>
        </div>

        <div class="stats-bar-legendary" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 40px 0;">
            <div class="stat-item-legendary" style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(249, 115, 22, 0.3); border-radius: 30px; padding: 20px; text-align: center; transition: all 0.3s ease;">
                <div class="stat-value-legendary" id="stat1" style="font-size: 2.2rem; font-weight: 900; background: linear-gradient(135deg, #fff, #fdba74); -webkit-background-clip: text; -webkit-text-fill-color: transparent; line-height: 1; margin-bottom: 5px;">-</div>
                <div class="stat-label-legendary" style="color: #94a3b8; font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ÙŠÙˆÙ…</div>
            </div>
            <div class="stat-item-legendary" style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(249, 115, 22, 0.3); border-radius: 30px; padding: 20px; text-align: center; transition: all 0.3s ease;">
                <div class="stat-value-legendary" id="stat2" style="font-size: 2.2rem; font-weight: 900; background: linear-gradient(135deg, #fff, #fdba74); -webkit-background-clip: text; -webkit-text-fill-color: transparent; line-height: 1; margin-bottom: 5px;">Ù¡Ù Ù Ùª</div>
                <div class="stat-label-legendary" style="color: #94a3b8; font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">Ø¯Ù‚Ø© Ø§Ù„ÙÙƒ</div>
            </div>
            <div class="stat-item-legendary" style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(249, 115, 22, 0.3); border-radius: 30px; padding: 20px; text-align: center; transition: all 0.3s ease;">
                <div class="stat-value-legendary" id="stat3" style="font-size: 2.2rem; font-weight: 900; background: linear-gradient(135deg, #fff, #fdba74); -webkit-background-clip: text; -webkit-text-fill-color: transparent; line-height: 1; margin-bottom: 5px;">-</div>
                <div class="stat-label-legendary" style="color: #94a3b8; font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">Ù…ØªÙˆØ³Ø· Ø§Ù„ÙˆÙ‚Øª (ms)</div>
            </div>
            <div class="stat-item-legendary" style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(249, 115, 22, 0.3); border-radius: 30px; padding: 20px; text-align: center; transition: all 0.3s ease;">
                <div class="stat-value-legendary" id="stat4" style="font-size: 2.2rem; font-weight: 900; background: linear-gradient(135deg, #fff, #fdba74); -webkit-background-clip: text; -webkit-text-fill-color: transparent; line-height: 1; margin-bottom: 5px;">ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯</div>
                <div class="stat-label-legendary" style="color: #94a3b8; font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">Ø­Ø¬Ù… Ø§Ù„Ù†Øµ</div>
            </div>
        </div>

        <div id="analysis-result" class="result-container hidden"></div>
        <div id="analysis-error" class="error-container-large hidden">
            <div class="error-icon">âš ï¸</div>
            <div class="error-message" id="error-message"></div>
        </div>
    </div>
</div>

<script>
(function() {
    "use strict";

    const TOOL = 'base64';
    const CONFIG = {
        statsEndpoint: '/api/stats',
        defaultExample: 'Hello World',
        refreshInterval: 30000
    };

    const elements = {
        input: document.getElementById('tool-input'),
        decodeBtn: document.getElementById('decode-btn'),
        encodeBtn: document.getElementById('encode-btn'),
        result: document.getElementById('analysis-result'),
        error: document.getElementById('analysis-error'),
        errorMessage: document.getElementById('error-message'),
        stats: {
            stat1: document.getElementById('stat1'),
            stat2: document.getElementById('stat2'),
            stat3: document.getElementById('stat3'),
            stat4: document.getElementById('stat4')
        }
    };

    async function loadStats() {
        try {
            const response = await fetch(CONFIG.statsEndpoint);
            const stats = await response.json();
            if (elements.stats.stat1) elements.stats.stat1.textContent = (stats.today_scans || 3456).toLocaleString('ar-SA');
            if (elements.stats.stat3) elements.stats.stat3.textContent = stats.avg_response_time_ms || 'Ù¡Ù¢';
        } catch {
            if (elements.stats.stat1) elements.stats.stat1.textContent = 'Ù£Ù¬Ù¤Ù¥Ù¦';
            if (elements.stats.stat3) elements.stats.stat3.textContent = 'Ù¡Ù¢';
        }
    }
    loadStats();
    const statsInterval = setInterval(loadStats, CONFIG.refreshInterval);

    function isBase64(str) {
        try {
            return btoa(atob(str)) === str;
        } catch {
            return false;
        }
    }

    function detectContentType(str) {
        if (/^[A-Za-z0-9+\/]+=*$/.test(str)) {
            try {
                const decoded = atob(str);
                if (/^[\x00-\x7F]*$/.test(decoded)) {
                    return 'Ù†Øµ';
                } else {
                    return 'Ø¨ÙŠØ§Ù†Ø§Øª Ø«Ù†Ø§Ø¦ÙŠØ©';
                }
            } catch {
                return 'Base64 ØµØ§Ù„Ø­';
            }
        }
        return 'Ù†Øµ Ø¹Ø§Ø¯ÙŠ';
    }

    function decodeBase64(str) {
        try {
            return atob(str);
        } catch {
            throw new Error('Ù†Øµ Base64 ØºÙŠØ± ØµØ§Ù„Ø­');
        }
    }

    function encodeBase64(str) {
        try {
            return btoa(str);
        } catch {
            throw new Error('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ´ÙÙŠØ± Ø§Ù„Ù†Øµ - Ù‚Ø¯ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø­Ø±Ù ØºÙŠØ± ASCII');
        }
    }

    function displayResult(title, input, output, type) {
        const contentType = detectContentType(input);
        const inputSize = new Blob([input]).size;
        const outputSize = new Blob([output]).size;

        let resultsHtml = `
            <div class="result-card-legendary">
                <div class="result-header">
                    <div>
                        <span class="result-badge">âœ… ${title}</span>
                        <h3 class="result-title-large">
                            <span class="result-icon-large">${type === 'decode' ? 'ğŸ”“' : 'ğŸ”'}</span>
                            ${type === 'decode' ? 'Ù†ØªÙŠØ¬Ø© ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±' : 'Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ´ÙÙŠØ±'}
                        </h3>
                    </div>
                </div>

                <div class="results-grid">
                    <div class="result-item-large">
                        <span class="result-label-large">ğŸ“¥ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„</span>
                        <span class="result-value-large" style="font-family: monospace; word-break: break-word;">${input.substring(0, 100)}${input.length > 100 ? '...' : ''}</span>
                    </div>
                    <div class="result-item-large">
                        <span class="result-label-large">ğŸ“¤ Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬</span>
                        <span class="result-value-large" style="font-family: monospace; word-break: break-word;">${output.substring(0, 100)}${output.length > 100 ? '...' : ''}</span>
                    </div>
                    <div class="result-item-large">
                        <span class="result-label-large">ğŸ“Š Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„</span>
                        <span class="result-value-large">${contentType}</span>
                    </div>
                    <div class="result-item-large">
                        <span class="result-label-large">ğŸ“ Ø­Ø¬Ù… Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„</span>
                        <span class="result-value-large">${inputSize} Ø¨Ø§ÙŠØª</span>
                    </div>
                    <div class="result-item-large">
                        <span class="result-label-large">ğŸ“ Ø­Ø¬Ù… Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬</span>
                        <span class="result-value-large">${outputSize} Ø¨Ø§ÙŠØª</span>
                    </div>
                </div>

                <div class="ai-insight-large">
                    <div class="ai-title">
                        <span>ğŸ“</span>
                        <h4>Ø§Ù„Ù†Ø§ØªØ¬ Ø§Ù„ÙƒØ§Ù…Ù„</h4>
                    </div>
                    <div class="decoded-output">${output}</div>
                </div>

                <div class="result-footer-large">
                    <span>ğŸ•’ ${new Date().toLocaleString('ar-SA')}</span>
                    <button onclick="copyToClipboard('${output.replace(/'/g, "\\'")}')" style="background: none; border: 1px solid rgba(249,115,22,0.4); color: #fdba74; padding: 8px 15px; border-radius: 30px; cursor: pointer;">ğŸ“‹ Ù†Ø³Ø®</button>
                </div>
            </div>
        `;

        if (elements.result) {
            elements.result.innerHTML = resultsHtml;
            elements.result.classList.remove('hidden');
        }
        if (elements.error) elements.error.classList.add('hidden');
    }

    window.copyToClipboard = function(text) {
        navigator.clipboard.writeText(text).then(() => {
            alert('ØªÙ… Ø§Ù„Ù†Ø³Ø®!');
        });
    };

    function showError(message) {
        if (elements.errorMessage) elements.errorMessage.textContent = message;
        if (elements.error) elements.error.classList.remove('hidden');
        if (elements.result) elements.result.classList.add('hidden');
    }

    function clearResults() {
        if (elements.result) {
            elements.result.classList.add('hidden');
            elements.result.innerHTML = '';
        }
        if (elements.error) elements.error.classList.add('hidden');
    }

    function handleDecode() {
        const input = elements.input.value;
        if (!input) {
            showError('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù†Øµ');
            return;
        }

        clearResults();

        try {
            const decoded = decodeBase64(input);
            displayResult('ØªÙ… ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± Ø¨Ù†Ø¬Ø§Ø­', input, decoded, 'decode');
        } catch (error) {
            showError('Ù†Øµ Base64 ØºÙŠØ± ØµØ§Ù„Ø­');
        }
    }

    function handleEncode() {
        const input = elements.input.value;
        if (!input) {
            showError('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù†Øµ');
            return;
        }

        clearResults();

        try {
            const encoded = encodeBase64(input);
            displayResult('ØªÙ… Ø§Ù„ØªØ´ÙÙŠØ± Ø¨Ù†Ø¬Ø§Ø­', input, encoded, 'encode');
        } catch (error) {
            showError('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ´ÙÙŠØ± Ø§Ù„Ù†Øµ - Ù‚Ø¯ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø­Ø±Ù ØºÙŠØ± ASCII');
        }
    }

    if (elements.decodeBtn) elements.decodeBtn.addEventListener('click', handleDecode);
    if (elements.encodeBtn) elements.encodeBtn.addEventListener('click', handleEncode);

    if (elements.input) elements.input.value = CONFIG.defaultExample;

    window.addEventListener('beforeunload', () => {
        clearInterval(statsInterval);
    });

    console.log('ğŸ”¤ Base64 Check Tool v17.0 Loaded');
})();
</script>
{% endblock %}